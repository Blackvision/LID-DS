FROM tomcat:latest
ADD ./index.jsp /usr/local/tomcat/webapps/ROOT/index.jsp
ADD ./uploadForm.html /usr/local/tomcat/webapps/ROOT/uploadForm.html
ADD ./context.xml /usr/local/tomcat/conf/context.xml
ADD ./greeting.html /usr/local/tomcat/webapps/ROOT/greeting.html
ADD ./gs-uploading-files/complete/target/uploading-files.war /usr/local/tomcat/webapps/uploading-files.war

# Gadget lib
ADD ./groovy-2.3.9.jar /usr/local/tomcat/lib/groovy-2.3.9.jar

# Malicious binary
ADD ./groovy.session /usr/local/tomcat/groovy.session
ADD ./ping.session /usr/local/tomcat/ping.session

RUN chmod 700 /usr/local/tomcat/webapps
EXPOSE 8080
CMD ["/usr/local/tomcat/bin/catalina.sh", "run"]
